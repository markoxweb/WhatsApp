<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Generador de enlace WhatsApp</title>
  <style>
    :root { --bg:#0b1220; --card:#121a2b; --fg:#eaf0ff; --muted:#9fb0d0; --accent:#4da3ff; }
    html,body{margin:0;padding:0;background:var(--bg);color:var(--fg);font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial;}
    .wrap{max-width:680px;margin:0 auto;padding:20px;}
    h1{font-size:1.3rem;margin:0 0 12px}
    .card{background:var(--card);border-radius:16px;padding:16px;box-shadow:0 6px 24px rgba(0,0,0,.25)}
    label{display:block;font-size:.9rem;margin:12px 0 6px;color:var(--muted)}
    input,textarea,select{width:100%;box-sizing:border-box;background:#0a1324;color:var(--fg);border:1px solid #1d2a45;border-radius:12px;padding:12px;font-size:1rem;outline:none}
    textarea{min-height:110px;resize:vertical}
    .row{display:flex;gap:10px}
    .row > *{flex:1}
    .help{font-size:.85rem;color:var(--muted);margin-top:6px}
    .btns{display:flex;gap:10px;flex-wrap:wrap;margin-top:14px}
    button, a.btn{appearance:none;border:0;border-radius:12px;padding:12px 14px;font-size:1rem;cursor:pointer;text-decoration:none}
    .primary{background:var(--accent);color:#001632;font-weight:700}
    .ghost{background:#0a1324;color:var(--fg);border:1px solid #1d2a45}
    .out{word-break:break-all;background:#0a1324;padding:12px;border-radius:12px;margin-top:12px;border:1px dashed #28406e}
    .small{font-size:.85rem}
    .footer{margin-top:18px;color:var(--muted);font-size:.85rem;text-align:center}
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Generador de enlace WhatsApp By @Markoxsistemaspub</h1>
    <div class="card">
      <div class="row">
        <div>
          <label for="cc">Código de país</label>
          <select id="cc" aria-label="Código de país">
            <option value="57" selected>+57 (Colombia)</option>
            <option value="52">+52 (México)</option>
            <option value="1">+1 (EE. UU./Canadá)</option>
            <option value="34">+34 (España)</option>
            <option value="51">+51 (Perú)</option>
            <option value="56">+56 (Chile)</option>
            <option value="54">+54 (Argentina)</option>
            <option value="55">+55 (Brasil)</option>
            <option value="593">+593 (Ecuador)</option>
            <option value="598">+598 (Uruguay)</option>
            <option value="502">+502 (Guatemala)</option>
          </select>
        </div>
        <div>
          <label for="phone">Número (sin + ni espacios)</label>
          <input id="phone" inputmode="numeric" pattern="[0-9]*" placeholder="3001112233" />
          <div class="help">Solo dígitos. Se concatenará con el código de país.</div>
        </div>
      </div>

      <label for="msg">Mensaje</label>
      <textarea id="msg" placeholder="Hola, quiero comprar el Smartphone X10."></textarea>

      <div class="btns">
        <button class="primary" id="openBtn">Abrir en WhatsApp</button>
        <button class="ghost" id="copyBtn">Copiar enlace</button>
        <button class="ghost" id="shareBtn">Compartir</button>
      </div>

      <div class="help">Enlace generado:</div>
      <div id="linkOut" class="out small">—</div>
    </div>

    <div class="footer">Tip: agrega esta página a tu pantalla de inicio para un acceso rápido.</div>
  </div>

  <script>
    const cc = document.getElementById('cc');
    const phone = document.getElementById('phone');
    const msg = document.getElementById('msg');
    const linkOut = document.getElementById('linkOut');
    const openBtn = document.getElementById('openBtn');
    const copyBtn = document.getElementById('copyBtn');
    const shareBtn = document.getElementById('shareBtn');

    function onlyDigits(s){ return (s || '').replace(/\D+/g,''); }

    function buildLink() {
      const code = onlyDigits(cc.value);
      const num = onlyDigits(phone.value);
      const text = msg.value || '';
      if(!code || !num) return '';
      const full = code + num;
      const url = `https://wa.me/${full}?text=${encodeURIComponent(text)}`;
      return url;
    }

    function render() {
      const url = buildLink();
      linkOut.textContent = url || '—';
      return url;
    }

    [cc, phone, msg].forEach(el => el.addEventListener('input', render));

    openBtn.addEventListener('click', () => {
      const url = render();
      if(!url){ alert('Completa código de país y número.'); return; }
      window.location.href = url;
    });

    copyBtn.addEventListener('click', async () => {
      const url = render();
      if(!url){ alert('No hay enlace para copiar.'); return; }
      try {
        await navigator.clipboard.writeText(url);
        copyBtn.textContent = '¡Copiado!';
        setTimeout(()=>copyBtn.textContent='Copiar enlace', 1200);
      } catch {
        // Fallback
        const ta = document.createElement('textarea');
        ta.value = url; document.body.appendChild(ta);
        ta.select(); document.execCommand('copy'); document.body.removeChild(ta);
        copyBtn.textContent = '¡Copiado!';
        setTimeout(()=>copyBtn.textContent='Copiar enlace', 1200);
      }
    });

    shareBtn.addEventListener('click', async () => {
      const url = render();
      if(!url){ alert('No hay enlace para compartir.'); return; }
      if (navigator.share) {
        try { await navigator.share({ title: 'WhatsApp Link', url }); }
        catch(_) {}
      } else {
        alert('Tu navegador no soporta compartir nativo. Usa "Copiar enlace".');
      }
    });

    // Render inicial con placeholders
    render();
  </script>
</body>
</html>